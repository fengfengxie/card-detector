# Product Requirements Document

## Overview
本项目是一个基于 Python + OpenCV 的“标准卡片识别与标定”工具。通过精确识别标准尺寸卡片的轮廓并输出其 bounding box，建立像素距离与实际距离的换算比例，从而为同图中的其它物体测量提供可靠标尺。

## Goals
- 在单卡、简单背景条件下，稳定识别标准卡片的四边形轮廓并输出 bounding box。
- 输出像素到真实尺寸的标定比例（例如：px/mm）。
- 给出检测结果的置信度，便于后续流程做质量判断。

## Non-Goals
- 不处理复杂背景或多卡场景（后续版本再扩展）。
- 不提供完整测量工具链（当前仅输出标定基础结果）。
- 不做深度学习模型训练或部署。

## Target Users
- 需要快速建立照片内尺寸标定的开发者/产品团队。
- 需要在手机/相机照片中进行尺寸估算的应用场景开发者。

## User Stories
- 作为开发者，我希望输入一张包含标准卡片的照片，获得卡片的 bbox、置信度和标定比例，以便测量其它物体尺寸。
- 作为产品团队，我希望在简单背景下结果稳定、精度高，从而减少后续测量误差。

## Requirements
- 输入：单张图片，包含单张标准尺寸卡片；背景简单、干扰少。
- 标准卡片尺寸：遵循 ISO/IEC 7810 ID-1（85.60 mm × 53.98 mm）。
- 输出：
  - `bbox`：卡片在图像中的像素坐标（四点或旋转矩形）。
  - `confidence`：检测置信度（0-1）。
  - `scale`：像素到真实尺寸换算比例（例如 px/mm 或 mm/px）。
- 精度：在给定输入条件下尽可能高（以最小化换算误差为目标）。
- 可复现：同一输入应得到稳定结果。

## Success Metrics
- 在目标输入条件下，检测成功率高（卡片被正确识别并输出 bbox）。
- 标定比例误差可控，满足后续测量使用（以测试集统计为准）。
- 在简单背景下鲁棒性良好（光照轻微变化、轻微旋转）。

## Risks
- 光照过曝/欠曝导致边缘模糊，影响轮廓提取。
- 卡片与背景颜色接近导致边缘检测困难。
- 透视畸变过大可能降低 bbox 精度。

## Open Questions
- 需要支持的最小分辨率和最大倾斜角度是多少？
- 置信度的定义与计算方式（轮廓拟合得分、几何一致性等）。
- 输出 bbox 是否统一为四点坐标还是旋转矩形？
